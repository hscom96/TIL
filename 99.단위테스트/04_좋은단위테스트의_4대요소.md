# 4장 좋은 단위 테스트의 4대 요소





## 두번째 요소 : 리팩터링 내성

- 테스트를 **'빨간색'(실패)로 바꾸지 않고 기본 애플리케이션 코드를 리팩터링할 수 있는지에 대한 척도**다.
- **거짓 양성**은 **허위 경보**다. 
  - 실제로 **기능이 의도한 대로 작동하지만 테스트는 실패**를 나타내는 결과.
  - 일반적으로 코드를 리팩터링할때, 즉 **구현을 수정하지만 식별할 수 있는 동작은 유지할 때 발생**한다.
- 왜 거짓 양성을 신경써야하는가?
  - 거짓 양성이 빈번하면 신뢰가 서서히 떨어지고, 회귀를 피하려고 코드 변경을 최소화하여 리팩터링이 줄어든다. 또한 타당한 실패도 무시하기 시작해 기능이 고장나도 운영환경에 들어감

### 무엇이 거짓 양성의 원인인가?

- 테스트와 sut의 구현 **세부 사항이 많이 결합할수록 허위 경보**가 더 많이 생긴다.

- 테스트를 통해 **SUT가 제공하는 최종 결과(관련된 절차가 아니라 식별할 수 있는 동작)를 검증하는지 확인**해야한다.

- 테스트 구성하는 좋은 방법은 **문제 영역에 대해 이야기**하는 것이다. 

  - 이러한 테스트가 실패하면, 이야기와 실제 애플리케이션 동작이 서로 분리되는 것을 의미함. -> 도움되는 실패

  

  

  

  

  

  

  

