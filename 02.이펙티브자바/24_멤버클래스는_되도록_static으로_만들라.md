# 아이템 24. 멤버 클래스는 되도록 static으로 만들라

## 중첩(nested) 클래스란?
다른 클래스 안에 정의된 클래스로, 자신을 감산 바깥 클래스에서만 사용한다.   
- 그 외 용도가 있으면 톱레밸 클래스로 만들어야한다.

<br/>

## 종류
- 정적 맴버 클래스
- (비정적) 맴버 클래스
- 익명 클래스
- 지역 클래스

> 정적 맴버 클래스 제외한 나머지는 내부 클래스(inner class)에 해당한다.

<br/>

## 1. 정적 멤버 클래스
- 흔히 바깥 클래스와 함께 쓰일 때만 유용한 public 도우미 클래스로 사용
  - ex) `Calculator.Operator.PLUS`, `Calculator.Operator.MINUS`
- private 정적 멤버 클래스는 흔히 바깥 클래스가 표현하는 객체의 한 부분을 나타낼 때 쓴다.
  - ex) Map 구현체의 키-값 Entry 객체

<br/>

## 2. 비정적 멤버 클래스
- __비정적 멤버 클래스의 인스턴스는 바깥 클래스의 인스턴스와 암묵적으로 연결된다.__
  - this를 통해 바깥 인스턴스 접근 가능
- 어댑터 정의할때 자주 쓰임
  - 어떤 클래스의 인스턴스를 감싸 마치 다른 클래스의 인스턴스처럼 보이게

<br/>

## 주의사항
비정적 멤버 클래스의 바깥 인스턴스로의 숨은 외부 참조는 다음의 문제가 있다.
1. __참조를 저장하려면 메모리 공간을 차지하고, 생성 시간도 더 걸린다.__
    - 만약 Map 구현체의 키-값 Entry 객체가 맵을 직접 사용하지 않는데 비정적으로 사용하면 모든 엔트리가 바깥 맵으로의 참조를 갖게되어 공간, 시간낭비
2. __가비지 컬렉션이 바깥 클래스의 인스턴스를 수거하지 못하여 메모리 누수 위험성__
3. 공개된 클래스의 public, protected 멤버 클래스라고 할때 만약 향후 릴리스에서 static을 추가로 붙이면 하위 호환성 깨진다.

<br/>

## 해결책 (정적 vs 비정적)
- __바깥 인스턴스에 접근할 일이 없이 독립적이면 static 정적 멤버 클래스로 만들자.__

<br/>

## 3. 익명 클래스
- 멤버와 달리 쓰이는 시점에 선언과 동시에 인스턴스 만들어짐.
- 코드 어디서든 만 들 수 있다.
- 비정적 문맥일때는 바깥 인스턴스 참조가능, 정적 문맥일때는 상수 변수 이외의 정적 멤버 못가진다.
- 이거 대신 람다를 사용하자

### 제약
- 선언된 지점에서만 사용가능
- 여러 인터페이스 구현 못함
- 인터페이스 구현 동시 다른 클래스 상속 불가능
- 클라이언트는 익명 클래스가 상위 타입에서 상속한 멤버 외 호출 불가능
- 이름이 필요한 작업 수행 못함 (instanceof ..)
- 가독성 떨어짐
