# 아이템 70. 복구할 수 있는 상황에는 검사 예외를, 프로그래밍 오류에는 런타임 예외를 사용하라

## 용어 정리

<img alt="44444444444›››››› 1" src="../images/hs/week_15/70_%EA%B2%80%EC%82%AC%EC%98%88%EC%99%B8_%EB%9F%B0%ED%83%80%EC%9E%84%EC%97%90%EB%9F%AC/c5b49055b7b49c085c1b64560a8e6d761694d6f944d2b6cbf05cc6ef1cb31c67.png" />  

#### Error (에러)

- 시스템에 비정상적인 상황이 생겼을때 발생. 시스템 레벨에서 발생하기 때문에 심각한 수준의 오류
    -
        - ex) 보통 jvm이 자원 부족, 불변식 깨짐 등 더 이상 수행을 계속할 수 없는 상황을 나타낼때
    - 비검사예외나 에러를 던졌다는 것은 복구가 불가능하거나 실행해봤자 득보다 실이 많다는 뜻.
- 개발자가 이런 에러에 대처할 방법은 없다.

#### Exception (예외)

- 사용자의 잘못된 조작 또는 개발자의 잘못된 코딩으로 인해 발생하는 프로그램 오류
    - 예외처리 헨들링을 통해서 정상 실행상태가 유지되도록 가능하다.

#### Compile vs Runtime

<img alt="picture 2" src="../images/hs/week_15/70_%EA%B2%80%EC%82%AC%EC%98%88%EC%99%B8_%EB%9F%B0%ED%83%80%EC%9E%84%EC%97%90%EB%9F%AC/fbde9fd7c39d29bef5452602f95d947f5837f35061a9bf11a8efd698366525b2.png" />  

- Compile time exception
    - 컴파일 과정에서 예외 처리 코드가 필요한지 검사. 없으면 컴파일 오류
- Runtime Exception
    - 컴파일 하는 과정에서 예외 처리 코드를 검사하지 않는 예외

<br/>

## 사용 구분

- 호출하는 쪽에서 복구(try-catch or throw exception)할 수 있는 상황이면 **검사 예외**를 사용하자
    - 즉, API 설계자가 사용자에게 검사 예외를 던져주어 그 상황에서 회복해내라고 요구한것
    - **검사 예외**라면 복구에 필요한 정보를 알려주는 메서드 제공하자.
- 프로그래밍 오류를 나타낼 때는 **비검사, 런타임 예외**를 사용하자.
    - ex) 전제조건 위배됐을때 (배열 인덱스 초과 등)
- 설계자의 판단에 달렸음
    - ex) 자원고갈은 프로그래밍 오류(말도 안되는 크기 배열 할당)일 수도 진짜로 자원이 부족한 문제일수도
    - 복구 가능하다 믿으면 검사예외, 그렇지 않다면 런타임 예외, **확실하지 않으면 비검사 예외 사용**하자.
- 우리가 구현하는 비검사 throwable은 모두 RuntimeException의 하위 클래스여야한다.

<br/>

## 책 Clean Code (by 로버트 마틴) 에서는

- unchecked exception를 사용하라고 한다.
    - (실제로 c++, 파이썬, c# 등도 checked exception을 사용안한다.)
- checked exception은 OCP(open closed principle)을 위반한다.
    - 메서드에서 확인된 예외를 던졌는데 catch블록이 세 단계 위에 있으면 그 사이 메서드 모두가 선언부에 해당 예외를 정의해야한다.
    - 즉, 하위 단계에서 코드를 변경하면 상위 단계 메서드 선언부를 전부 고쳐야된다. -> 캡슐화 깨짐
    - ex) 최하위 함수에서 새로운 오류를 던지면 최상위 단계까지 연쇄적인 수정(선언부 throw절 or catch블록)이 이루어진다.

<br/>

## Refrence

- 이펙티브 자바 3판
- 이것이 자바다
- https://www.nextree.co.kr/p3239/  