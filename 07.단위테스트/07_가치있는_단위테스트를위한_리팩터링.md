# 7장 가치 있는 단위테스트를 위한 리팩터링

# 리팩터링할 코드 식별하기

## 코드의 네가지 유형



모든 제품 코드는 2차원으로 분류할 수 있다.

- **복잡도 또는 도메인 유의성**
  - 복잡도는 코드내 의사 결정(분기) 지점 수로 정의
  - 도메인 유의성은 코드가 프로젝트 문제 도메인에 얼마나 의미 있는지
  - 복잡한 코드와 도메인 유의성을 갖는 코드가 회귀 방지에 뛰어나서 단위 테스트에 이롭다.
- **협력자 수**
  - 협력자가 많으면 테스트도 커져서 테스트 비용이 많이 든다. (유지보수성 지표때문)
  - 협력자 유형도 중요. 도메인 모델은 외부 협력자를 사용하면 안됨. 또한 리팩터링 내성을 지키려면 신중하게 목을 사용.

<img src="https://raw.githubusercontent.com/hscom96/ImageStore/main/images/2023/04/23/image-20230423162859419.png" alt="image-20230423162859419" style="width:50%;" />

코드는 4가지 유형이 있다.

- **도메인 모델과 알고리즘** 
- **간단한 코드**
- **컨트롤러** : 복잡하거나 비즈니스에 중요한 작업을 하는 것이 아니라 도메인 클래스와 외부 애플리케이션 같은 다른 구성 요소의 작업을 조정한다.
- **지나치게 복잡한 코드** : 두가지 지표 모두 높다. 협력자가 많으며 복잡하거나 중요하다.



