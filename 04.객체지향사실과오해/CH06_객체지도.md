

# CH 06. 객체 지도

- 주제 : 자주 변경 되는 기능이 아니라 **안정적인 구조를 따라 역할, 책임, 협력을 구성하라**
  - 기능이 아닌 **구조를 기반**으로 설계하는것이 좀 더 범용적이고 이해하기 쉬우며 **변경에 안정적**




## 기능 설계 vs 구조 설계

- 용어 정리

  - 기능 측면 설계 : 제품이 사용자를 위해 무엇을 할 수 있는지에 초점 (ex. 사람에게 길묻기)
  - 구조 측면 설계 : 제품의 형태가 어떠해야 하는지에 초점 (ex. 지도)

- 전통적인 기능 분해 (functional decomposition)

  - 자주 변경되는 **기능을 중심으로 설계**한 후 **구조가 기능에 따르게** 한다.
  - 각 기능은 서로 밀접하게 관련된 하나의 덩어리를 이루어 기능이 변경될 경우 기능의 축을 따라 설계된 소프트웨어가 전체적으로 요동침

- 객체지향 접근 방법

  - 자주 변경되지 않는 **안정적인 객체 구조를 바탕**으로 시스템 기능을 객체 간의 책임으로 분배한다.
    - = 구조에 집중하고 기능이 객체의 구조를 따르게 만든다.

  

## 두가지 재료: 기능과 구조

- **구조**는 사용자나 이해관계자들이 **도메인에 관해 생각하는 개념과 개념들 간의 관계**로 표현
- **기능**은 사용자의 목표를 만족시키기 위해 책임을 수행하는 시스템의 행위로 표현한다.
- 용어
  - 유스케이스 모델링 : 기능을 수집하고 표현하기 위한 기법 -> 결과물(유스케이스)
  - 도메인 모델링 : 구조를 수집하고 표현하기 위한 기법 -> 결과물(도메일 모델)


## 안정적인 재료 : 구조

### 도메인모델

- 용어 정리

  - 도메인 : 사용자가 프로그램을 사용하는 대상 분야

  - 모델 : 대상을 **추상화**하고 **단순화**한 것

  - 도메일 모델 : 사용자가 프로그램을 사용하는 **대상 영역**에 관한 지식을 선택적으로 **단순화**하고 의식적으로 **구조화**한 형태

    - 도메인 모델은 이해 관계자들이 바라보는 **멘탈모델**
    - **멘탈 모델** : 사람들이 자기 자신, 다른 사람, 환경, 자신이 상호작용하는 사물들에 대해 갖는 모형

- 제품을 설계할때 제품에 관한 모든것이 **사용자들이 제품에 대해 가지고 있는 멘탈모델과 정확하게 일치**해야한다.
  - 사용자가 예상하는 방식에 따라 정확하게 반응하는게 훌륭한 디자인이기 때문이다

  - <img src="https://raw.githubusercontent.com/hscom96/ImageStore/main/images/2022/11/20/image-20221120004031042.png" alt="image-20221120004031042" style="width:60%;" />  
    
    
    
    - 설계자는 디자인 모델을 기반으로 만든 시스템 이미지가 **사용자 모델을 정확하게 반영**하도록 노력해야함
    - 도메인 모델은  **사용자 모델, 디자인 모델, 시스템 이미지를 포괄**할 수 있도록 **추상화**한 소프트웨어 모델. 
  
  

### 도메인의 모습을 담을 수 있는 객체지향

- 최종 코드는 **사용자가 도메인을 바라보는 관점을 반영**해야 한다.
- 연결완전성, 표현적 차이 : 객체지향을 이용하면 도메인에 대한 사용자 모델, 디자인 모델, 시스템 이미지 **모두가 유사한 모습을 유지**하도록 만드는것이 가능하다. 



### 표현적 차이

- 소프트웨어 객체는 현실 객체를 모방한 것이아니라 **은유를 기반으로 재창조**한것. 

  - 따라서 현실 객체가 갖지 못한 특성 가지고, 행동을 할 수 있음
  - 핵심은 **은유를 통해 차이를 최대한 줄이는것** 

- 하지만 현실에 존재하지도 않는게 있을 수 있는데 현실 객체를 은유한다는건 힘들다. 따라서 은유를 통해 투영해야 하는 대상은?

  - 우리가 **은유해야하는 대상**은 바로 **사용자가 도메인에 대해 생각하는 개념**인 **도메인 모델** . **도메인 모델을 통해 표현되는 도메인 객체들을 은유**해야함.
  - 결과적으로 **사용자가 도메인을 바라보는 관점 그대로 코드에 반영**하게됨. 표현적 차이가 줄어듬. -> **이해하고 수정하기 쉽게함**



### 불안정한 기능을 담는 안정적인 도메인 모델

- **도메인 모델이 기능을 담을 수 있는 안정적인 구조를 제공**. 
  - 변경에 유연해짐



## 불안정한 재료 : 기능

### 유스케이스

- 사용자의 목표를 달성하기 위해 **사용자와 시스템 간에 이뤄지는 상호작용의 흐름**을 **텍스트로 정리**한것
  - **사용자들의 목표**를 중심으로 시**스템의 기능적인 요구사항**들을 **이야기 형식**으로 묶을 수 있다.
  
  > 일차 액터 : 시스템의 서비스 중 하나를 요청하는 이해관계자로, 하나의 목표를 가지고 **유스케이스를 시작하는 액터** (시스템과 연동하는 외부시스템도 포함)



### 유스케이스 특성

1. 유스케이스는 사용자와 시스템 간의 상호작용을 보여주는 '텍스트'다. (일련의 이야기 흐름)

2. 유스케이스는 하나의 시나리오가 아니라 여러 시나리오들의 집합이다.

   1. 시나리오를 유스케이스 인스턴스라고 함

3. 유스케이스는 단순한 피처(feature) 목록과 다르다

   1. featrue는 시스템이 수행해야하는 기능의 목록을 단순하게 나열
      1. 단점 : 두 피처를 연관없는 독립적인 기능으로 보이게함
   2. 유스케이스 장점 : 단순히 기능을 나열하는 것이 아닌 이야기를 통해 연관된 기능을 함께 묶음

4. 유스케이스는 사용자 인터페이스와 관련된 세부 정보를 포함하지 말아야한다.

   1. 자주 변경되는 사용자 인터페이스 요소 배제하고 사용자 관점에서 시스템의 행위에 초점

5. 유스케이스는 내부 설계와 관련된 정보를 포함하지 않는다.

   

### 유스케이스는 설계 기법도, 객체지향 기법도 아니다

- 유스케이스는 단지 **사용자가 바라보는 시스템의 외부 관점만 표현**
  - 유스케이스로 부터 시스템의 **내부구조 유추할 수 있는 방법없음**



## 재료 합치기: 기능과 구조의 통합

### 도메인 모델, 유스케이스, 그리고 책임-주도 설계

- 순서
  - 객체지향 패러다임은 모든 것이 객체라는 사상에서 출발
  - **시스템**을 **사용자**로 부터 전송된 메시지를 수행하기 위해 **책임을 수행하는 커다란 자율적인 객체**로 본다.
  - 시스템이라는 객체 에서 **더 작은 크기의 객체**들이 수행해야하는 **더 작은 규모의 책임으로 세분화**
    - 책임-주도 설계는 이 지점부터 적용
    - 이때 **도메인 모델**에 포함된 개념을 **은유**하는 소프트웨어 객체를 선택해야한다. (**표현적 차이**를 줄임)
  - 협력을 완성하는데 필요한 메시지를 식별하면서 객체들에게 책임을 할당

## 기능 변경을 흡수하는 안정적인 구조

- 도메인 모델 안정적인 이유
  - **도메인 모델을 구성하는 개념**은 비즈니스가 없어지거나 완전히 개편되지 않는 한 안정적으로 유지된다.
  - **도메인 모델을 구성하는 개념 간의 관계**는 비즈니스 규칙을 기반으로 하기 때문에 비즈니스 정책이 크게 변경되지 않는 한 안정적으로 유지된다.
- 기능적인 요구사항이 변경될 경우 책임과 객체 간의 대응 관계만 수정될 뿐이다. 
- 안정적인 도메인 모델을 기반으로 시스템을 구현할 경우 시스템의 기능이 변경되더라도 비즈니스의 핵심 정책이나 규칙이 변경되지 않는 한 전체적인 구조가 한 번에 흔들리지는 않는다.
- 도메인 모델이 코드와 분리된 별도의 산출물이 아니다.







​	











